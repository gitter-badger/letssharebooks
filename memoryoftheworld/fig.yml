sshd:
    build: ssh
    entrypoint: /usr/local/bin/supervisord
    ports:
        - "722:722"
        - "3773:3773"
    dns: 127.0.0.1

mongodb:
    build: mongodb
    entrypoint: /usr/bin/mongod
    ports:
        - "27017:27017"

library:
    build: library
    entrypoint: /usr/local/bin/supervisord
    volumes: 
        - /home/m/devel/letssharebooks/library:/var/www/library
    ports:
        - "4321:4321"
    links:
        - mongodb
        - sshd
    dns: 127.0.0.1

nginx:
    build: nginx
    entrypoint: /usr/local/bin/supervisord
    ports:
        - "80:80"
        - "443:443"
    links:
        - sshd
        - library
    dns: 127.0.0.1

prosody:
    build: prosody
    entrypoint: /usr/local/bin/supervisord
    ports:
        - "5222:5222"
        - "5269:5269"
        - "5280:5280"
        - "5347:5347"
        - "5281:5281"
    dns: 127.0.0.1
